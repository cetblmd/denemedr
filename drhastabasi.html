<!DOCTYPE html>
<html lang="tr">
<head>
<link href="https://fonts.cdnfonts.com/css/aptos" rel="stylesheet">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Doktor Hasta BaÅŸÄ± - Sesli Komutlu (Responsive)</title>
<style>
*, *::before, *::after {
    box-sizing: border-box;
}
body {
    margin: 0;
    font-family: 'Aptos', sans-serif;
}
.main-content-wrapper {
    display: flex;
    height: 100vh;
    margin-top: 0;
    overflow: hidden;
}
/* Sol panel */
.sol-panel {
    width: 25%;
    background-color: #d0e7f9;
    padding: 10px;
    box-sizing: border-box;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 15px;
    transition: 0.3s;
    flex-shrink: 0;
}

/* SaÄŸ panel */
.sag-icerik {
    width: 75%;
    padding: 0;
    box-sizing: border-box;
    background-color: #f5f5f5;
    overflow-y: auto;
    transition: 0.3s;
}

/* SaÄŸ panelde TEK kart gÃ¶rÃ¼nÃ¼mÃ¼nde kart tam geniÅŸlikte olsun, boyut serbest */
.sag-icerik > .kutu {
    width: 100%;
    max-width: none;
}


/* Dashboard grid (saÄŸ panelde) */
.dashboard-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
    justify-content: center;
    align-content: flex-start;
    padding: 8px;
}
.dashboard-grid .kutu {
    width: 360px;
}

/* Kartlar */
.kutu {
    background-color: #ffffff;
    padding: 10px;
    border-radius: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    position: relative;
    cursor: pointer;
}
.kutu-baslik {
    font-weight: bold;
    font-size: 14px;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer; 
}
.kutu .ac-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    cursor: pointer;
    font-size: 16px;
}

/* Hasta kutusu */
.hasta-kutu {
    display: flex;
    gap: 10px;
    align-items: flex-start;
}
.hasta-kutu img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #0b3c61;
}
.hasta-bilgiler {
    display: flex;
    flex-direction: column;
    gap: 1px;
    font-size: 14px;
}
.hasta-bilgiler p {
    margin: 1px 0;
}
.hasta-ayirici {
    border-bottom: 1px solid #ccc;
    margin: 10px 0;
}
.hasta-ek-bilgiler p {
    margin: 3px 0;
    font-size: 13px;
}
.hasta-uyari {
    color: #b71c1c;
    font-weight: bold;
    margin-top: 6px;
}

/* Hasta Bilgisi iframe embed */
.hasta-bilgisi-embed {
    width: 100%;
    border-radius: 8px;
    overflow: hidden;
}

.hasta-bilgisi-embed iframe {
    width: 100%;
    border: none;
    background: transparent;
    min-height: 340px;
}

/* Mobilde biraz daha yÃ¼ksek dursun */
@media (max-width: 768px) {
    .hasta-bilgisi-embed iframe {
        min-height: 420px;
    }
}


/* Tablo */
table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
}
th, td {
    text-align: left;
    padding: 5px;
    border-bottom: 1px solid #ccc;
}
th {
    background-color: #0b3c61;
    color: white;
}
.kucuk-resim {
    width: 50px;
    height: 50px;
    object-fit: cover;
}

/* Muayene Ã¶zet */
.muayene-ozet {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;  
    overflow: hidden;
    text-overflow: ellipsis;
}

/*CET - SaÄŸ panelde KESÄ°NLÄ°KLE kÄ±sÄ±tlama olmasÄ±n */

/* SaÄŸ panele taÅŸÄ±nan kartlarÄ±n kendisinde yÃ¼kseklik/scroll olmasÄ±n */
.sag-icerik .kutu {
    max-height: none !important;
    overflow: visible !important;
}

/* SaÄŸ paneldeki TÃœM tablolarda (laboratuvar, teÅŸhis vb.)
   iÃ§ scroll'u kapat, satÄ±rlarÄ± tam boy gÃ¶ster */
.sag-icerik table tbody {
    display: table-row-group !important;
    max-height: none !important;
    overflow: visible !important;
}

/* SaÄŸ panelde muayene Ã¶zetleri tam gÃ¶rÃ¼nsÃ¼n, 2 satÄ±r kÄ±sÄ±tÄ± kalksÄ±n */
.sag-icerik .muayene-ozet {
    display: block;
    -webkit-line-clamp: unset;
    -webkit-box-orient: initial;
    overflow: visible;
    text-overflow: unset;
}


/* Mobil menÃ¼ ikonu */
#mobileMenuToggle { display:none !important; }


/* Ãœst bar 1 */
#hasta-ozet {
    background:#d0e7f9;
    color:black;
    padding:8px;
    font-weight:bold;
    display:flex;
    align-items:center;
    gap:10px;
    position: fixed;
    top:0;
    right:0;
    z-index:9999;
    font-size:16px;
    justify-content: space-between;
}
#hasta-ozet img {
    width:30px;
    height:30px;
    border-radius:50%;
    object-fit:cover;
    border:2px solid white;
}
#hasta-ozet .ust-butons {
    margin-left:auto;
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap: nowrap;
}
.btn-group {
    display:flex;
    gap:5px;
    align-items:center;
}
.btn-group.view-actions {
    margin-left:16px;
    padding-left:12px;
    border-left:1px solid rgba(0,0,0,0.15);
}
#hasta-ozet .ust-butons button {
    background-color: #0b3c61;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 5px 8px;
    cursor: pointer;
    font-size: 13px;
}
#hasta-ozet .ust-butons button:hover {
    background-color: #0d4a78;
}
#hasta-ozet .ust-butons .btn-group.view-actions button {
    width:30px;
    height:30px;
    border-radius:50%;
    padding:0;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:16px;
    background: #d0e7f9;
    color: #000;
    border:none;
}
#hasta-ozet .ust-butons .btn-group.view-actions button:hover {
    background:#c0d7ea;
}
.enabiz-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #0b3c61;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 4px 8px;
    cursor: pointer;
    font-size: 13px;
}
.enabiz-btn:hover {
    background-color: #0d4a78;
}

/* Ãœst bar 2 */
/* HÄ±zlÄ± aksiyon bar (2. satÄ±r ikonlar) */
#hizli-aksiyon-bar {
    background: #c8def0;
    padding: 2px 6px;
    display: flex;
    gap: 4px;
    align-items: center;
    border-bottom: 1px solid #b0c8d8;

    position: fixed;
    top: 48px;
    left: 0;
    right: 0;
    z-index: 9998;

    /* PC / tablet / mobil hepsinde butonlar SAÄA dayalÄ± */
    justify-content: flex-end;
}

/* 2. satÄ±r ikon butonlar */
.icon-btn2 {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    padding: 0;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:18px;

    background: #c8def0;
    color: #000;
    border: 1px solid #b0c8d8;
}

/* Hover efekti */
.icon-btn2:hover {
    background: #bcd3e6;
}

/* Her ihtimale karÅŸÄ± gÃ¶rÃ¼nÃ¼r kÄ±l */
#hizli-aksiyon-bar .icon-btn2 {
    background: #c8def0 !important;
    color: #000 !important;
    border: none !important;
}


#hasta-ozet .icon-btn  {
    background: inherit !important;
    color: #000 !important;
    border: none !important;
}

#hasta-ozet .icon-btn.mic-on {
    background: #2ecc71 !important;   /* yeÅŸil */
    color: #fff !important;
    border: 1px solid #27ae60 !important;
}


/* Lab */
.kutu[data-turu="laboratuvar"] table tbody {
    display: block;
    max-height: calc(6 * 28px); 
    overflow-y: auto;
}

/* SaÄŸ paneldeki laboratuvar (ve diÄŸer) tablolar kÄ±sÄ±tsÄ±z olsun */
.sag-icerik .kutu table tbody {
    display: table-row-group !important;
    max-height: none !important;
    overflow: visible !important;
}


.kutu[data-turu="laboratuvar"].active table tbody,
.kutu[data-turu="laboratuvar"].full table tbody,
.sag-icerik .kutu[data-turu="laboratuvar"] table tbody {
    max-height: none; 
    overflow-y: visible;
    display: table-row-group;
}

/* Sol panelde "tam iÃ§erik" modunda kartlar */
.kutu.full .muayene-ozet {
    display: block;
    -webkit-line-clamp: unset;
    -webkit-box-orient: initial;
    overflow: visible;
}
/* Lab iÃ§in zaten .full desteÄŸi var; ekstra bir ÅŸey gerekirse buraya ekleriz */

/* ğŸ”¹ GENEL: full modda tÃ¼m kart iÃ§eriklerini tamamen gÃ¶ster */
.kutu.full .kutu-icerik {
    max-height: none;
    overflow: visible;
    display: block;
}


.kutu[data-turu="laboratuvar"] table thead,
.kutu[data-turu="laboratuvar"] table tbody tr {
    display: table;
    width: 100%;
    table-layout: fixed;
}

/* Kenar menÃ¼ler */
.edge-menu {
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    max-height: 70vh;
    background: rgba(208, 231, 249, 0.85);
    border: 1px solid #90a4b8;
    box-sizing: border-box;
    display: flex;
    align-items: stretch;
    transition: width 0.25s ease, box-shadow 0.25s ease;
    z-index: 1200;
    overflow: hidden;
    font-size: 13px;
}
.edge-menu.left {
    left: 0;
    border-radius: 0 10px 10px 0;
}
.edge-menu.right {
    right: 0;
    border-radius: 10px 0 0 10px;
}
.edge-menu:hover {
    width: 230px;
    box-shadow: 2px 0 8px rgba(0,0,0,0.25);
}
.edge-menu-tab {
    writing-mode: vertical-rl;
    transform: rotate(180deg);
    padding: 3px 2px;
    background: #0b3c61 !important;
    color: #fff;
    font-weight: bold;
    text-align: center;
    cursor: pointer;
    flex-shrink: 0;
    font-size: 11px;
    border-radius: 0 6px 6px 0;
}
.edge-menu-content {
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    white-space: nowrap;
}
.edge-menu-content button {
    background: #0b3c61 !important;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 4px 8px;
    cursor: pointer;
    text-align: left;
    font-size: 12px;
}
.edge-menu-content button:hover {
    background: #0d4a78 !important;
}

.settings-submenu {
    display: none;             /* baÅŸlangÄ±Ã§ta kapalÄ± */
    flex-direction: column;
    gap: 4px;
    margin-top: 4px;
    margin-left: 8px;          /* biraz iÃ§erden baÅŸlasÄ±n */
}

.settings-submenu button {
    font-size: 12px;
    padding-left: 18px;        /* sekmeli gibi dursun */
}


#sag-icerik-icerik {
    margin-top: 12px;
    padding: 10px;
}

/* AÅŸÄ± tablosu responsive */
.responsive-table-container {
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-top: 5px;
}
.responsive-header {
    display: flex;
    font-weight: bold;
    background-color: #0b3c61;
    color: white;
    padding: 8px 0; 
    font-size: 12px;
    border-radius: 5px 5px 0 0;
}
.responsive-row {
    display: flex;
    border-bottom: 1px solid #eee;
    padding: 8px 0; 
    font-size: 13px;
    transition: background-color 0.2s;
}
.responsive-row:hover {
    background-color: #f7f7f7;
}
.responsive-row:last-child {
    border-bottom: none;
}
.responsive-row.uyari {
    background-color: #ffe0b2;
    font-weight: bold;
    color: #e65100;
}
.responsive-header > div,
.responsive-row > div {
    overflow: visible; 
    text-overflow: clip; 
    white-space: normal; 
    box-sizing: border-box;
    padding: 0 5px; 
}
.col-adi { flex: 2.5 0 0; }
.col-doz { flex: 1 0 0; text-align: center; }
.col-tarih { flex: 1.5 0 0; }
.col-sonraki { flex: 2 0 0; }
.col-durum { flex: 1.5 0 0; text-align: right; }
.responsive-row .label { display:none; }

/* Mobil menÃ¼ modal */
.menu-modal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.6);
}


.menu-modal.active {
    display: block;   /* ğŸ”¹ JS active ekleyince modal gÃ¶rÃ¼nsÃ¼n */
}

.menu-modal-content {
    background-color: #fefefe;
    margin: 15% auto; 
    padding: 10px;
    border: 1px solid #888;
    width: 90%; 
    max-width: 400px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #ccc;
    margin-bottom: 10px;
    padding-bottom: 5px;
}
.menu-header h3 {
    margin: 0;
    color: #0b3c61;
}
.menu-group {
    margin-bottom: 15px;
    padding: 8px;
    border: 1px solid #d0e7f9;
    border-radius: 8px;
}
.menu-group h4 {
    margin-top: 0;
    margin-bottom: 8px;
    color: #0d4a78;
    font-size: 14px;
    padding-bottom: 4px;
    border-bottom: 1px solid #e0e0e0;
}
.menu-modal .menu-group button {
    display: block;
    width: 100%;
    background-color: #0b3c61;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 8px 10px;
    cursor: pointer;
    font-size: 13px;
    margin-bottom: 5px;
    text-align: left;
}
.menu-modal .menu-group button:hover {
    background-color: #0d4a78;
}
.menu-modal .close-btn {
    color: #aaa;
    font-size: 20px;
    font-weight: bold;
    border: none;
    background: none;
    cursor: pointer;
}
.menu-modal .close-btn:hover,
.menu-modal .close-btn:focus {
    color: black;
}


#voice-command-box {
    position: fixed;
    bottom: 8px;
    left: 8px;
    background: rgba(11, 60, 97, 0.9);
    color: #fff;
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 12px;
    z-index: 9999;
    max-width: 320px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
#voice-command-box span {
    font-weight: bold;
}

/* SaÄŸ paneldeki tÃ¼m kartlar tamamen sÄ±nÄ±rsÄ±z olsun */
.sag-icerik .kutu {
    max-height: none !important;
    overflow: visible !important;
}

/* === SAÄ PANELDE TÃœM Ä°Ã‡ERÄ°KLER SINIRSIZ GÃ–RÃœNSÃœN === */



/* Ã–zellikle tbody iÃ§in */
.sag-icerik .kutu table tbody {
    display: table-row-group !important;
    max-height: none !important;
    overflow: visible !important;
}

/* Muayene Ã¶zetleri tamamen aÃ§Ä±k olsun */
.sag-icerik .muayene-ozet {
    display: block !important;
    -webkit-line-clamp: unset !important;
    overflow: visible !important;
}


/* Tablet */
@media (max-width: 1024px) and (min-width: 769px) {
    body { font-size: 14px; }
    .main-content-wrapper {
        height: 100vh;
        margin-top: 0;
    }
    .sol-panel { width: 35%; gap: 12px; }
    .sag-icerik { width: 65%; }
    .btn-group.view-actions {
        margin-left: 8px; 
        padding-left: 8px; 
        border-left: 1px solid rgba(0,0,0,0.15); 
    }


    #hasta-ozet .ust-butons { gap:4px; }
    #hasta-ozet .ust-butons button {
        padding: 4px 6px;
        font-size: 12px;
    }

    /* 1. SATIR - YÃ¼ksekliÄŸi kÃ¼Ã§Ã¼lt, stabil olsun */
    #hasta-ozet {
        height: 44px !important;
        padding: 4px 6px !important;
    }

    /* 2. SATIR - Tablet iÃ§in doÄŸru yere yerleÅŸtir */
    #hizli-aksiyon-bar {
        top: 44px !important;      /* 1.satÄ±rÄ±n tam altÄ±na gelsin */
        height: 36px !important;
        padding: 4px 6px !important;
    }

    /* 2. satÄ±r ikonlarÄ±nÄ± tablet iÃ§in hafif kÃ¼Ã§Ã¼ltelim */
    #hizli-aksiyon-bar .icon-btn2 {
        width: 30px;
        height: 30px;
        font-size: 16px;
    }
}

/* Mobil */
@media (max-width: 768px) {
    body {
        height: auto;
        min-height: 100vh;
        padding: 0;
    }
    .main-content-wrapper {
        flex-direction: column;
        height: auto;
        margin-top: 0 !important;
    }
    .sol-panel,
    .sag-icerik {
        width: 100%;
        height: auto;
        min-height: auto; 
    }
    .sol-panel {
        max-height: none; 
        padding: 8px;
        gap: 8px;
    }
    .sag-icerik {
        display: none !important;
    }
    .kutu > *:not(.kutu-baslik):not(.ac-icon) {
        display: none; 
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out, padding 0.3s ease-out;
    }
    .kutu.active > *:not(.kutu-baslik):not(.ac-icon) {
        display: block; 
        max-height: 2000px; 
        padding-top: 8px;
        transition: max-height 0.5s ease-in, padding 0.5s ease-in;
    }
    #hasta-ozet {
        padding: 6px 8px;
        font-size: 14px;
    }
    #hizli-aksiyon-bar {
        top: 44px;
        padding: 2px;
    }

#hasta-ozet,
    #hizli-aksiyon-bar {
        position: static;
        width: 100%;
    }
.main-content-wrapper {
        margin-top: 0;
    }

    #hasta-ozet .ust-butons {
        flex-wrap: wrap; 
        justify-content: flex-end;
    }
    .btn-group.view-actions {
        margin-left: 0;
        padding-left: 0;
        border-left: none;
    }
    .icon-btn2 {
        width: 26px;
        height: 26px;
        font-size: 14px;
    }

    .edge-menu { display:none; }
    #mobileMenuToggle { 
	display:flex !important; 
	margin-left: 8px;
        width: 32px;
        height: 32px;
        font-size: 20px;
        align-items: center;
        justify-content: center;
        background: #fff;
        border-radius: 6px;
    }

    .menu-modal {
        display: none; 
        padding: 0;
        background-color: #f5f5f5;
    }

    .menu-modal.active {
        display: block;         /* veya flex */
    }

    .menu-modal-content {
        margin: 0;
        width: 100%;
        height: 100%;
        max-width: none;
        padding: 10px;
        border: none;
        border-radius: 0;
    }

    .responsive-header { display:none; }
    .responsive-row {
        flex-direction: column;
        align-items: flex-start;
        padding: 10px;
        gap: 2px;
    }
    .col-adi, .col-doz, .col-tarih, .col-sonraki, .col-durum {
        flex: 100%;
        width: 100%;
        text-align: left !important;
        font-size: 12px;
    }
    .responsive-row .label {
        display: inline-block;
        font-weight: bold;
        color: #0b3c61;
        margin-right: 5px;
        min-width: 80px;
    }

    .detail-modal {
        display: none;
        position: fixed;
        z-index: 10000; 
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: #f5f5f5;
        overflow-y: auto;
    }
    .detail-modal.active { display:block; }
    .detail-modal-header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 50px;
        background-color: #d0e7f9;
        color: #0b3c61;
        display: flex;
        align-items: center;
        padding: 0 10px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        z-index: 10001; 
    }
    .detail-modal-header h3 {
        margin: 0;
        font-size: 16px;
        font-weight: bold;
        flex-grow: 1;
        text-align: center;
        padding-right: 30px;
    }
    .detail-modal-header .back-btn {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #0b3c61;
        padding: 0 5px;
        line-height: 1;
        position: relative;
        left: 0;
        z-index: 2;
    }
    .detail-modal-content {
        margin-top: 50px; 
        padding: 10px;
        padding-bottom: 20px;
    }
    .detail-modal-content .kutu {
        box-shadow: none;
        border: 1px solid #ccc;
        padding: 10px;
    }
    .detail-modal-content .kutu-baslik { display:none; }
    .detail-modal-content .ac-icon { display:none; }
    .detail-modal-content .kutu > *:not(.kutu-baslik):not(.ac-icon) {
        display: block;
        max-height: none !important;
        overflow: visible !important;
        padding-top: 0 !important;
    }

    #leftPanelToggleBtn {
        display: none !important;
    }
}
</style>
</head>
<body>

<div id="hasta-ozet">
    <div style="display:flex; align-items:center; gap:10px;">
        <img src="https://picsum.photos/40?random=1" alt="Hasta">
        <span>Ahmet YÄ±lmaz - 35 / Erkek</span>
    </div>

    <div class="ust-butons">
        <div class="btn-group primary-actions">
            <button>ğŸ’Š Ä°laÃ§ YÃ¶netimi</button>
            <button class="enabiz-btn" title="e-NabÄ±z">
                <img src="https://picsum.photos/18?random=5" alt="e-NabÄ±z" style="height:18px; width:auto; display:block;">
            </button>
            <button>ğŸ§¾ SGK</button>
            <button>ğŸ©º SÄ°NA</button>
        </div>

        <div class="btn-group view-actions">
            <button class="icon-btn" id="mikrofonToggleBtn" title="Mikrofon BaÅŸlat/Durdur">ğŸ¤</button>
            <button class="icon-btn" id="fullscreenToggleBtn" title="Tam ekran Dashboard">ğŸ–¥ï¸</button>
	    <button class="icon-btn" id="leftAllExpandBtn" title="Sol panelde tÃ¼m iÃ§erikleri gÃ¶ster">ğŸ“œ</button>
            <button class="icon-btn" id="leftPanelToggleBtn" title="Sol Paneli Gizle">â¬…</button>
            <button class="icon-btn" id="hizliBarToggleBtn" title="HÄ±zlÄ± Aksiyon BarÄ±nÄ± AÃ§/Kapat">â¬‡ï¸</button>
	    <button class="icon-btn" id="mobileMenuToggle" title="Mobil MenÃ¼">â˜°</button>        </div>
    </div>
</div>


<div id="hizli-aksiyon-bar">
    <button class="icon-btn2" title="Barkod / Karekod Okut">ğŸ“·</button>
    <button class="icon-btn2" title="Ä°laÃ§ ReÃ§etesi">ğŸ’Š</button>
    <button class="icon-btn2" title="Hasta Notu Ekle">ğŸ“</button>
    <button class="icon-btn2" title="Rapor OluÅŸtur">ğŸ“„</button>
    <button class="icon-btn2" title="Laboratuvar Ä°stem">ğŸ§ª</button>
    <button class="icon-btn2" title="Radyoloji Ä°stem">ğŸ©»</button>
    <button class="icon-btn2" title="e-NabÄ±z Klinik Bilgi">ğŸŒ</button>
    <button class="icon-btn2" title="Risk/UyarÄ±">âš ï¸</button>
    <button class="icon-btn2" title="Acil Durum">ğŸš¨</button>
    <button class="icon-btn2" title="Takvim / Randevu">ğŸ“…</button>
</div>

<div class="main-content-wrapper" id="mainWrapper">
    <div class="sol-panel" id="solPanel">
        <!-- KUTULAR (senin son versiyonun) -->
	  <div class="kutu" id="panel-hasta-bilgisi" data-turu="hasta-bilgisi">
    <div class="kutu-baslik">Hasta Bilgisi</div>
    <span class="ac-icon">ğŸ”</span>

    <div class="hasta-bilgisi-embed">
        <iframe
            id="hastaBilgisiFrame"
            src="hastabilgisi.html"
            loading="lazy"
            onload="resizeHastaBilgisiFrame()">
        </iframe>
    </div>
</div>

        <div class="kutu" id="panel-muayene" data-turu="muayene">
            <div class="kutu-baslik">Muayene Bilgileri</div>
            <span class="ac-icon">ğŸ”</span>
            <table>
                <tbody>
                    <tr><td>Muayenesi</td><td class="muayene-ozet">Ayakta genel durum iyi, nabÄ±z 78, solunum normal, gÃ¶zler canlÄ± ve refleksler dÃ¼zenli...</td></tr>
                    <tr><td>Åikayeti</td><td class="muayene-ozet">SÄ±rt aÄŸrÄ±sÄ±, baÅŸ dÃ¶nmesi, ara sÄ±ra yorgunluk ve halsizlik belirtileri mevcut...</td></tr>
                    <tr><td>Ã–ykÃ¼sÃ¼</td><td class="muayene-ozet">7 ay Ã¶nce baÅŸlayan aÄŸrÄ±, ilerleyen haftalarda hafifledi ancak bazen uzun sÃ¼re oturunca tekrar artÄ±yor...</td></tr>
                    <tr><td>Tedavisi</td><td class="muayene-ozet">Fizik tedavi, egzersiz programÄ± ve aÄŸrÄ± kesici dÃ¼zenli olarak uygulanmakta...</td></tr>
                    <tr><td>Anamnezi</td><td class="muayene-ozet">Hipertansiyon ve hafif astÄ±m Ã¶ykÃ¼sÃ¼ mevcut, ailede diyabet ve kalp hastalÄ±ÄŸÄ± geÃ§miÅŸi...</td></tr>
                </tbody>
            </table>
        </div>

        <div class="kutu" id="panel-teshis" data-turu="teshis">
            <div class="kutu-baslik">TeÅŸhis KodlarÄ±</div>
            <span class="ac-icon">ğŸ”</span>
            <table>
                <tbody>
                    <tr><td>ICD10: M54.5</td><td>Bel aÄŸrÄ±sÄ±</td></tr>
                    <tr><td>ICD10: I10</td><td>Hipertansiyon</td></tr>
                    <tr><td>ICD10: E11</td><td>Tip 2 Diyabet</td></tr>
                    <tr><td>ICD10: J45</td><td>AstÄ±m</td></tr>
                </tbody>
            </table>
        </div>

        <div class="kutu" id="panel-laboratuvar" data-turu="laboratuvar">
            <div class="kutu-baslik">Laboratuvar SonuÃ§larÄ±</div>
            <span class="ac-icon">ğŸ”</span>
            <table>
                <thead>
                    <tr><th>Test</th><th>SonuÃ§</th><th>Referans</th></tr>
                </thead>
                <tbody>
                    <tr><td>HbA1c</td><td>7.2%</td><td>4.0 - 6.0%</td></tr>
                    <tr><td>AÃ§lÄ±k Glukoz</td><td>132 mg/dL</td><td>70 - 100 mg/dL</td></tr>
                    <tr><td>Kreatinin</td><td>1.3 mg/dL</td><td>0.6 - 1.2 mg/dL</td></tr>
                    <tr><td>eGFR</td><td>58 mL/dk</td><td>&gt; 90 mL/dk</td></tr>
                    <tr><td>LDL Kolesterol</td><td>130 mg/dL</td><td>&lt; 100 mg/dL</td></tr>
                    <tr><td>Trigliserid</td><td>210 mg/dL</td><td>&lt; 150 mg/dL</td></tr>
                    <tr><td>ALT</td><td>32 U/L</td><td>&lt; 40 U/L</td></tr>
                    <tr><td>AST</td><td>29 U/L</td><td>&lt; 40 U/L</td></tr>
                    <tr><td>CRP</td><td>3.2 mg/L</td><td>&lt; 5 mg/L</td></tr>
                    <tr><td>WBC</td><td>7.8 x10Â³/ÂµL</td><td>4.0 - 11.0</td></tr>
                    <tr><td>Hgb</td><td>13.1 g/dL</td><td>13.0 - 17.0 g/dL</td></tr>
                    <tr><td>Plt</td><td>260 x10Â³/ÂµL</td><td>150 - 400</td></tr>
                    <tr><td>Vitamin D</td><td>18 ng/mL</td><td>30 - 100 ng/mL</td></tr>
                    <tr><td>TSH</td><td>2.1 ÂµIU/mL</td><td>0.4 - 4.0 ÂµIU/mL</td></tr>
                </tbody>
            </table>
        </div>

        <div class="kutu" id="panel-radyoloji" data-turu="radyoloji">
            <div class="kutu-baslik">Radyoloji SonuÃ§larÄ±</div>
            <span class="ac-icon">ğŸ”</span>
            <table>
                <tbody>
                    <tr>
                        <td><img class="kucuk-resim" src="https://picsum.photos/50?random=2" alt="MR"></td>
                        <td>Lomber MR: L4-L5 seviyesinde minimal protrÃ¼zyon, sinir kÃ¶klerine belirgin basÄ± izlenmedi.</td>
                    </tr>
                    <tr>
                        <td><img class="kucuk-resim" src="https://picsum.photos/50?random=3" alt="BT"></td>
                        <td>Beyin BT: Akut patoloji saptanmadÄ±, kronik iskemik odaklar izleniyor.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="kutu" id="panel-recete" data-turu="recete">
            <div class="kutu-baslik">Ä°laÃ§ ReÃ§eteleri</div>
            <span class="ac-icon">ğŸ”</span>
            <table>
                <tbody>
                    <tr><td>Metformin 1000 mg</td><td>2x1</td></tr>
                    <tr><td>Amlodipin 5 mg</td><td>1x1</td></tr>
                    <tr><td>Ä°nhaler BronkodilatÃ¶r</td><td>GÃ¼nde 2-3 kez</td></tr>
                    <tr><td>Omeprazol 20 mg</td><td>1x1 (Sabah aÃ§)</td></tr>
                </tbody>
            </table>
        </div>

        <div class="kutu" id="panel-asi" data-turu="asi">
            <div class="kutu-baslik">AÅŸÄ± ve BaÄŸÄ±ÅŸÄ±klama</div>
            <span class="ac-icon">ğŸ”</span>
            <div class="responsive-table-container">
                <div class="responsive-header">
                    <div class="col-adi">AÅŸÄ± AdÄ±</div>
                    <div class="col-doz">Doz</div>
                    <div class="col-tarih">Son Uygulama</div>
                    <div class="col-sonraki">Sonraki Doz</div>
                    <div class="col-durum">Durum</div>
                </div>

                <div class="responsive-row">
                    <div class="col-adi"><span class="label">AÅŸÄ± AdÄ±:</span>Tetanoz (Td)</div>
                    <div class="col-doz"><span class="label">Doz:</span>Rutin</div>
                    <div class="col-tarih"><span class="label">Son Uygulama:</span>12.05.2020</div>
                    <div class="col-sonraki"><span class="label">Sonraki Doz:</span>12.05.2030</div>
                    <div class="col-durum"><span class="label">Durum:</span>GÃ¼ncel</div>
                </div>

                <div class="responsive-row">
                    <div class="col-adi"><span class="label">AÅŸÄ± AdÄ±:</span>Grip AÅŸÄ±sÄ±</div>
                    <div class="col-doz"><span class="label">Doz:</span>YÄ±llÄ±k</div>
                    <div class="col-tarih"><span class="label">Son Uygulama:</span>10.11.2024</div>
                    <div class="col-sonraki"><span class="label">Sonraki Doz:</span>10.11.2025</div>
                    <div class="col-durum"><span class="label">Durum:</span>PlanlandÄ±</div>
                </div>

                <div class="responsive-row uyari">
                    <div class="col-adi"><span class="label">AÅŸÄ± AdÄ±:</span>PnÃ¶mokok (PPV23)</div>
                    <div class="col-doz"><span class="label">Doz:</span>1 Doz</div>
                    <div class="col-tarih"><span class="label">Son Uygulama:</span>01.03.2018</div>
                    <div class="col-sonraki"><span class="label">Sonraki Doz:</span>Doktor kararÄ± ile tekrar</div>
                    <div class="col-durum"><span class="label">Durum:</span>GÃ¶zden geÃ§ir</div>
                </div>

                <div class="responsive-row">
                    <div class="col-adi"><span class="label">AÅŸÄ± AdÄ±:</span>Covid-19 Bivalan</div>
                    <div class="col-doz"><span class="label">Doz:</span>3. Doz</div>
                    <div class="col-tarih"><span class="label">Son Uygulama:</span>15.01.2023</div>
                    <div class="col-sonraki"><span class="label">Sonraki Doz:</span>GÃ¼ncel rehbere gÃ¶re</div>
                    <div class="col-durum"><span class="label">Durum:</span>Ã–nerilebilir</div>
                </div>
            </div>
        </div>

        <div class="kutu" id="panel-notlar" data-turu="notlar">
            <div class="kutu-baslik">Hekim NotlarÄ± ve Plan</div>
            <span class="ac-icon">ğŸ”</span>
            <ul>
                <li>Bel fÄ±tÄ±ÄŸÄ± aÃ§Ä±sÄ±ndan nÃ¶rolojik muayene tekrarlanacak.</li>
                <li>Gerekirse nÃ¶roÅŸirÃ¼rji konsÃ¼ltasyonu istenecek.</li>
                <li>Kilo kontrolÃ¼ ve egzersiz programÄ±na uyum vurgulandÄ±.</li>
                <li>Kan ÅŸekeri regÃ¼lasyonu iÃ§in endokrinoloji ile iletiÅŸim.</li>
            </ul>
        </div>

        <div class="kutu" id="panel-randevu" data-turu="randevu">
            <div class="kutu-baslik">Randevu ve Kontroller</div>
            <span class="ac-icon">ğŸ”</span>
            <table>
                <tbody>
                    <tr><td>Kontrol Muayene</td><td>15.12.2025 - 09:30</td></tr>
                    <tr><td>Fizik Tedavi SeansÄ±</td><td>Her hafta SalÄ±/PerÅŸembe</td></tr>
                    <tr><td>GÃ¶z KontrolÃ¼</td><td>20.01.2026 - 14:00</td></tr>
                </tbody>
            </table>
        </div>
    </div>


    <div class="sag-icerik" id="sagPanel">
        <div id="sag-icerik-icerik">
            <div class="kutu">
                <div class="kutu-baslik">SaÄŸ Panel BaÅŸlangÄ±Ã§ Ä°Ã§eriÄŸi</div>
                <p>
                    Sol panelden bir pencereye Ã§ift tÄ±kladÄ±ÄŸÄ±nÄ±zda veya ğŸ” ikonuna bastÄ±ÄŸÄ±nÄ±zda,
                    ilgili pencerenin detaylarÄ± burada aÃ§Ä±lacaktÄ±r.
                </p>
                <p>
                    AyrÄ±ca, Ã¼stteki ğŸ–¥ï¸ ikonuna basarak tam ekran dashboard moduna geÃ§ebilir, â¬… ikonuyla sol paneli gizleyebilir,
                    mikrofon ikonuyla da sesli komutlarÄ± baÅŸlatÄ±p durdurabilirsiniz.
                </p>
            </div>
        </div>
    </div>

</div>

<div class="edge-menu left">
    <div class="edge-menu-tab">Sol MenÃ¼</div>
    <div class="edge-menu-content">
        <button>ğŸ  Ana Sayfa</button>
        <button>ğŸ“‚ Dosya GeÃ§miÅŸi</button>
        <button>ğŸ‘¨â€âš•ï¸ KonsÃ¼ltasyonlar</button>

        <!-- AÃ§Ä±lÄ±r Ayarlar menÃ¼sÃ¼ -->
        <button id="settingsMainBtn" type="button">âš™ï¸ Ayarlar â–¾</button>
        <div id="settingsSubmenu" class="settings-submenu">
            <button type="button" onclick="window.location.href='anamnezsolpanelozellestir.html'">
                ğŸ§© Sol Paneli Ã–zelleÅŸtir
            </button>
            <!-- Ä°lerde buraya baÅŸka alt ayarlar da ekleyebiliriz -->
        </div>
    </div>
</div>


<div class="edge-menu right">
    <div class="edge-menu-tab">HÄ±zlÄ± Ä°ÅŸlem</div>
    <div class="edge-menu-content">
        <button>ğŸ§¾ Yeni ReÃ§ete</button>
        <button>ğŸ§ª Yeni Tetkik</button>
        <button>ğŸ©» GÃ¶rÃ¼ntÃ¼leme Ä°ste</button>
        <button>ğŸ“… Randevu PlanlayÄ±cÄ±</button>
        <button>ğŸ“Š Ä°statistikler</button>
        <button>ğŸ“„ Rapor ÅablonlarÄ±</button>
        <button>âœ‰ï¸ KonsÃ¼ltasyon</button>
        <button>âš™ï¸ Ayarlar</button>
    </div>
</div>

<div id="mobile-menu-modal" class="menu-modal">
    <div class="menu-modal-content">
        <div class="menu-header">
            <h3>HÄ±zlÄ± Ä°ÅŸlemler</h3>
            <button id="closeMobileMenu" class="close-btn">&times;</button>
        </div>
        <div class="menu-group">
            <h4>ReÃ§ete ve Tetkikler</h4>
            <button>ğŸ’Š Yeni ReÃ§ete</button>
            <button>ğŸ§ª Yeni Tetkik</button>
            <button>ğŸ©» GÃ¶rÃ¼ntÃ¼leme Ä°ste</button>
        </div>
        <div class="menu-group">
            <h4>Hasta Ä°ÅŸlemleri</h4>
            <button>ğŸ“‚ Dosya GeÃ§miÅŸi</button>
            <button>ğŸ‘¨â€âš•ï¸ KonsÃ¼ltasyonlar</button>
            <button>ğŸ“… Randevu PlanlayÄ±cÄ±</button>
        </div>
        <div class="menu-group">
            <h4>Sistem</h4>
            <button>ğŸ“Š Ä°statistikler</button>
            <button>ğŸ“„ Rapor ÅablonlarÄ±</button>
<!-- AÃ§Ä±lÄ±r Ayarlar + alt menÃ¼ -->
            <button id="mobileSettingsMainBtn" type="button" title="Ayarlar">âš™ï¸ Ayarlar â–¾</button>
            <div id="mobileSettingsSubmenu" class="settings-submenu">
                <button
                    type="button"
                    onclick="window.location.href='anamnezsolpanelozellestir.html'">
                    ğŸ§© Sol Paneli Ã–zelleÅŸtir
                </button>
            </div>
        </div>
    </div>
</div>

<div id="card-detail-modal" class="detail-modal">
    <div class="detail-modal-header">
        <button id="closeDetailModalBtn" class="back-btn">â¬…</button>
        <h3 id="detail-modal-title">Pencere AdÄ±</h3>
    </div>
    <div id="detail-modal-content" class="detail-modal-content"></div>
</div>

<script>
const mainWrapper = document.getElementById('mainWrapper');
const solPanel    = document.getElementById('solPanel');
const sagPanel    = document.getElementById('sagPanel');
const hastaOzet   = document.getElementById('hasta-ozet');
const sagIcerik   = document.getElementById('sag-icerik-icerik');
const hizliBar    = document.getElementById('hizli-aksiyon-bar');

const fullscreenBtn = document.getElementById('fullscreenToggleBtn');
const hizliBarToggleBtn = document.getElementById('hizliBarToggleBtn'); 
const leftAllExpandBtn = document.getElementById('leftAllExpandBtn');
const leftPanelBtn  = document.getElementById('leftPanelToggleBtn');
const micBtn        = document.getElementById('mikrofonToggleBtn');
const mobileMenuToggleBtn = document.getElementById('mobileMenuToggle');
const mobileMenuModal = document.getElementById('mobile-menu-modal');
const closeMobileMenuBtn = document.getElementById('closeMobileMenu');

const settingsMainBtn = document.getElementById('settingsMainBtn');
const settingsSubmenu = document.getElementById('settingsSubmenu');
let settingsMenuOpen = false;

const mobileSettingsMainBtn = document.getElementById('mobileSettingsMainBtn');
const mobileSettingsSubmenu = document.getElementById('mobileSettingsSubmenu');
let mobileSettingsMenuOpen = false;


const mobileDetailModal = document.getElementById('card-detail-modal');
const detailModalTitle  = document.getElementById('detail-modal-title');
const detailModalContent = document.getElementById('detail-modal-content');
const closeDetailModalBtn = document.getElementById('closeDetailModalBtn');

let solHidden = false;
let micActive = false;
let dashboardMode = false;
let initialViewApplied = false;
let fullscreenRequestedByButton = false;
let solAllExpanded= false;

let defaultSagIcerikHTML = sagIcerik ? sagIcerik.innerHTML : '';
let lastRightPanelHTML = defaultSagIcerikHTML;

function resizeHastaBilgisiFrame() {
    try {
        // Sol panel + saÄŸ panele kopyalanan TÃœM iframe'leri yakala
        const frames = document.querySelectorAll('iframe#hastaBilgisiFrame, iframe[src*="hastabilgisi"]');

        frames.forEach(frame => {
            const doc = frame.contentDocument || (frame.contentWindow && frame.contentWindow.document);
            if (!doc) return;

            const body = doc.body;
            if (!body) return;

            // Ä°Ã§erik yÃ¼ksekliÄŸi kadar iframe yÃ¼ksekliÄŸi
            frame.style.height = body.scrollHeight + 'px';
        });
    } catch (e) {
alert("hata");
alert(e);
        console.error('hastaBilgisiFrame resize hatasÄ±:', e);
    }
}


// Ekran modu: 'mobile' | 'tablet' | 'desktop'
function getViewportMode() {
    const w = window.innerWidth;
    if (w <= 768) return 'mobile';
    if (w <= 1024) return 'tablet';
    return 'desktop';
}

let currentViewportMode = getViewportMode();


let recognition = null;
const speechSupported = 'SpeechRecognition' in window || 'webkitSpeechRecognition' in window;
const voiceBox = document.getElementById('voice-command-box');
const voiceText = document.getElementById('voice-command-text');

function showVoiceCommand(text) {
    if (!voiceBox || !voiceText) return;
    voiceText.textContent = text || '-';
}

// ğŸ”¹ Ortak helper: sol panelde ilgili pencereyi bulup saÄŸda aÃ§
function openPanelByType(partOfDataTuru) {
    if (!solPanel) return false;

    const hedef = partOfDataTuru.toLowerCase();
    const kutular = solPanel.querySelectorAll('.kutu');

    for (const k of kutular) {
        const tur = (k.dataset.turu || '').toLowerCase();
        if (tur.includes(hedef)) {
            // Sol panel kapalÄ±ysa aÃ§
            if (solHidden) toggleLeftPanel();
            // SaÄŸ panelde geniÅŸ olarak aÃ§
            openCardInRightPanel(k);
            return true;
        }
    }
    return false;
}

/* === SOL PANEL Ã–ZELLEÅTÄ°RME AYARLARINI UYGULA === */

function applySolPanelConfig() {
    const raw = localStorage.getItem('solPanelConfig');
    if (!raw) return;  // hiÃ§ ayar yoksa dokunma

    let config;
    try {
        config = JSON.parse(raw);
    } catch {
        return;
    }
    if (!Array.isArray(config)) return;

    const solPanel = document.getElementById('solPanel');
    if (!solPanel) return;

    // 1) SÄ±raya gÃ¶re kutularÄ± yeniden diz
    config.forEach(item => {
        if (!item || !item.id) return;
        const el = document.getElementById(item.id); // Ã–rn: panel-hasta-bilgisi
        if (el && el.parentElement === solPanel) {
            solPanel.appendChild(el); // sÄ±raya gÃ¶re sona ekleyerek diz
        }
    });

    // 2) GÃ¶rÃ¼nÃ¼rlÃ¼k ayarlarÄ±nÄ± uygula
    config.forEach(item => {
        if (!item || !item.id) return;
        const el = document.getElementById(item.id);
        if (el && el.parentElement === solPanel) {
            el.style.display = item.enabled === false ? 'none' : '';
        }
    });
}

function getDefaultPanelIdFromConfig() {
    const raw = localStorage.getItem('solPanelConfig');
    if (!raw) return null;

    try {
        const cfg = JSON.parse(raw);
        if (!Array.isArray(cfg)) return null;

        // Ã–nce isDefault && enabled olanÄ± bul
        let chosen = cfg.find(c => c.isDefault && c.enabled);
        // Yoksa ilk enabled paneli al
        if (!chosen) {
            chosen = cfg.find(c => c.enabled);
        }

        return chosen ? chosen.id : null;  // Ã–rn: "panel-hasta-bilgisi"
    } catch (e) {
        console.error('solPanelConfig parse hatasÄ±:', e);
        return null;
    }
}



function handleVoiceCommand(cmd) {
    const text = cmd.toLowerCase();
	
    if (text.includes('geri dÃ¶n') || text.includes('geri don') || text.includes('geri')  || text.includes('dÃ¶n') || text.includes('don')) {
        // EÄŸer mobil detay modalÄ± aÃ§Ä±ksa, geri butonuna basÄ±lmÄ±ÅŸ gibi yap
        if (mobileDetailModal && mobileDetailModal.classList.contains('active')) {
            if (closeDetailModalBtn) {
                closeDetailModalBtn.click();   // aynen kullanÄ±cÄ± oka basmÄ±ÅŸ gibi
            } else {
                // emniyet: buton yoksa direkt fonksiyonu Ã§aÄŸÄ±r
                if (typeof closeCardDetailModal === 'function') {
                    closeCardDetailModal();
                }
            }
        }
        return; // Bu komutu iÅŸledik, alttaki diÄŸer if'lere geÃ§mesin
    }


    if (text.includes('dashboard aÃ§') || text.includes('deÅŸbord aÃ§') || text.includes('daÅŸbord aÃ§') || text.includes('full ekran') || text.includes('deÄŸiÅŸport aÃ§')) {
        applyDashboardLayout(true);
    } else if (text.includes('dashboard kapat') || text.includes('ekranÄ± kapat')) {
        applyDashboardLayout(false);
    } else if (text.includes('sol panel kapat') || text.includes('sol paneli kapat') || text.includes('paneli kapat')) {
        if (!solHidden) toggleLeftPanel();
    } else if (text.includes('sol panel aÃ§')  || text.includes('sol paneli aÃ§') || text.includes('paneli aÃ§')) {
        if (solHidden) toggleLeftPanel();
// ğŸ”¸ Pencereler
    } else if (text.includes('hasta bilgisi') || text.includes('hasta kartÄ±') || text.includes('hasta')) {
        openPanelByType('hasta-bilgisi');

    } else if (text.includes('muayene')) {
        openPanelByType('muayene');

    } else if (text.includes('teÅŸhis') || text.includes('tanÄ±') || text.includes('tani')) {
        openPanelByType('teshis');

    } else if (text.includes('laboratuvar') || text.includes('tahlil') || text.includes('lab')) {
        openPanelByType('laboratuvar');

    } else if (text.includes('radyoloji') || text.includes('film') || text.includes('bt') || text.includes('mr')) {
        openPanelByType('radyoloji');

    } else if (text.includes('reÃ§ete') || text.includes('ilaÃ§')) {
        openPanelByType('recete');

    } else if (text.includes('aÅŸÄ±') || text.includes('baÄŸÄ±ÅŸÄ±klama')) {
        openPanelByType('asi');

    } else if (text.includes('notlar') || text.includes('plan')) {
        openPanelByType('notlar');

    } else if (text.includes('randevu') || text.includes('kontrol')) {
        openPanelByType('randevu');
    }
}    // Buraya ileride yeni komutlar ekleyebiliriz.

function startRecognition() {

    if (!speechSupported) {
        alert('TarayÄ±cÄ±nÄ±z sesli komut (SpeechRecognition) Ã¶zelliÄŸini desteklemiyor.');
        micActive = false;
        return;
    }
    if (!recognition) {
        const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
        recognition = new SR();
        recognition.lang = 'tr-TR';
        recognition.continuous = true;
        recognition.interimResults = false;

recognition.onstart = function () {
        micBtn.style.backgroundColor = '#2ecc71';  // yeÅŸil
        micBtn.style.color = '#fff';
        micBtn.style.border = '1px solid #27ae60';
    };

recognition.onend = function () {

            // EÄŸer micActive hÃ¢lÃ¢ true ise â†’ otomatik yeniden baÅŸlat
            if (micActive) {
                try {
                    recognition.start();
                } catch(e) {
                    console.error(e);
                }
            } else {
                // KullanÄ±cÄ± mikrofonu kapattÄ±ysa â†’ eski gÃ¶rÃ¼nÃ¼me dÃ¶n
                micBtn.style.backgroundColor = 'inherit';
                micBtn.style.color = '#000';
                micBtn.style.border = 'none';
                micBtn.title = 'Mikrofonu BaÅŸlat';
            }
        };

        recognition.onresult = (event) => {
            const lastResult = event.results[event.results.length - 1];
            if (!lastResult || !lastResult[0]) return;
            const transcript = lastResult[0].transcript.trim();
            console.log('Sesli komut:', transcript);
            showVoiceCommand(transcript);
            handleVoiceCommand(transcript);
        };

        recognition.onerror = (event) => {
            console.error('SpeechRecognition error:', event.error);
            // Hata olduÄŸunda otomatik kapatalÄ±m
            micActive = false;
            micBtn.style.backgroundColor = 'inherit';
            micBtn.style.color = '#000';
            micBtn.title = 'Mikrofonu BaÅŸlat';
            showVoiceCommand('Hata: ' + event.error);
        };

    }

    try {
        recognition.start();
        showVoiceCommand('Dinleniyor...');
    } catch (e) {
        console.error('Recognition start hatasÄ±:', e);
    }
}

function stopRecognition() {
    if (recognition) {
        micActive = false;
        try {
            recognition.stop();
        } catch(e) {
            console.error(e);
        }
        showVoiceCommand('-');
    }
}



function calculateHeaderHeight() {
    let height = 0;
    if (hastaOzet && getComputedStyle(hastaOzet).display !== 'none') {
        height += hastaOzet.offsetHeight;
    }
    if (hizliBar && getComputedStyle(hizliBar).display !== 'none') {
        height += hizliBar.offsetHeight;
    }
    return height;
}

function getLeftPanelWidth() {
    const isVisible = solPanel && getComputedStyle(solPanel).display !== 'none';
    if (window.matchMedia("(max-width: 768px)").matches) return 0;
    if (!isVisible || solHidden) return 0;
    if (dashboardMode) return 0;
    return solPanel.offsetWidth;
}

function updateFixedHeaderPosition() {
    const offset = getLeftPanelWidth();
    if (hastaOzet) hastaOzet.style.left = offset + 'px';
    if (hizliBar) hizliBar.style.left = offset + 'px';
}

function setPanelOffsets() {
    const totalHeaderHeight = calculateHeaderHeight();
    const solPanelPadding = 10; 
    
    if (!window.matchMedia("(max-width: 768px)").matches) {
        mainWrapper.style.marginTop = '0'; 
        mainWrapper.style.height = 'auto';
        mainWrapper.style.minHeight = '100vh';
        mainWrapper.style.flexDirection = 'row';

        solPanel.style.marginTop = '0';
        solPanel.style.height = 'auto';
        solPanel.style.paddingTop = solPanelPadding + 'px'; 
        
        sagPanel.style.marginTop = totalHeaderHeight + 'px';
        sagPanel.style.height = 'auto';
        sagPanel.style.minHeight = `calc(100vh - ${totalHeaderHeight}px)`;
    } else {
        mainWrapper.style.marginTop = totalHeaderHeight + 'px';
        mainWrapper.style.height = 'auto';
        mainWrapper.style.flexDirection = 'column';
        
        solPanel.style.marginTop = '0'; 
        solPanel.style.height = 'auto'; 
        solPanel.style.paddingTop = '8px';
        
        sagPanel.style.marginTop = '0';
        sagPanel.style.height = 'auto';
        sagPanel.style.minHeight = '0';
    }
}

/* Mobil detay modalÄ± */
function openCardDetailModal(kutu) {
    if (!mobileDetailModal || !detailModalContent || !detailModalTitle) return;
    const titleText = kutu.querySelector('.kutu-baslik').textContent;
    detailModalTitle.textContent = titleText;
    
    detailModalContent.innerHTML = '';
    const clone = kutu.cloneNode(true);
    const ac = clone.querySelector('.ac-icon');
    if (ac) ac.remove();
    clone.classList.remove('active'); 
    
    clone.querySelectorAll('.muayene-ozet').forEach(td => {
        td.style.display = 'block';
        td.style.webkitLineClamp = 'unset';
    });
    if (kutu.dataset.turu === 'laboratuvar') {
        const labTbody = clone.querySelector('table tbody');
        if (labTbody) {
             labTbody.style.maxHeight = 'none';
             labTbody.style.overflowY = 'visible';
             labTbody.style.display = 'table-row-group';
        }
    }
    
    detailModalContent.appendChild(clone);
    mobileDetailModal.classList.add('active');
    mobileDetailModal.scrollTop = 0;
}
function closeCardDetailModal() {
    if (mobileDetailModal) {
        mobileDetailModal.classList.remove('active');
    }
}

/* SaÄŸ panel tek kart detay */
function openCardInRightPanel(kutu) {
    // Mobilde yine modal'Ä± kullan
    if (window.matchMedia("(max-width: 768px)").matches) {
        openCardDetailModal(kutu);
        return;
    }
    if (!sagIcerik) return;

    const baslik = kutu.querySelector('.kutu-baslik')
        ? kutu.querySelector('.kutu-baslik').innerText
        : 'Detay';

    sagIcerik.innerHTML = '';

    const yeniKutu = document.createElement('div');
    yeniKutu.className = 'kutu';

    const yeniBaslik = document.createElement('div');
    yeniBaslik.className = 'kutu-baslik';
    yeniBaslik.textContent = baslik + ' (Detay)';
    yeniKutu.appendChild(yeniBaslik);

    // Kart iÃ§eriÄŸini klonla
    const icerikKlon = kutu.cloneNode(true);
    icerikKlon.classList.remove('active');

    // Sol paneldeki bÃ¼yÃ¼teÃ§ ve baÅŸlÄ±ÄŸÄ± temizle
    const ikon = icerikKlon.querySelector('.ac-icon');
    if (ikon) ikon.remove();
    const baslikElemani = icerikKlon.querySelector('.kutu-baslik');
    if (baslikElemani) baslikElemani.remove();

    // SaÄŸ panelde MUAYENE Ã¶zetleri tamamen aÃ§Ä±k olsun
    icerikKlon.querySelectorAll('.muayene-ozet').forEach(td => {
        td.style.display = 'block';
        td.style.webkitLineClamp = 'unset';
        td.style.overflow = 'visible';
    });

    // SaÄŸ paneldeki TÃœM tablolar (lab, teÅŸhis, reÃ§ete vb.) iÃ§in
    // satÄ±r kÄ±sÄ±tlarÄ± ve iÃ§ scroll'u kaldÄ±r
    icerikKlon.querySelectorAll('table tbody').forEach(tbody => {
        tbody.style.maxHeight = 'none';
        tbody.style.overflowY = 'visible';
        tbody.style.display = 'table-row-group';
    });

    // Klonun iÃ§ini yeni kutuya taÅŸÄ±
    while (icerikKlon.firstChild) {
        yeniKutu.appendChild(icerikKlon.firstChild);
    }

    sagIcerik.appendChild(yeniKutu);
    lastRightPanelHTML = sagIcerik.innerHTML;

// ğŸ”¹ Hasta bilgisi saÄŸ tarafa aÃ§Ä±ldÄ±ÄŸÄ±nda da iframe yÃ¼ksekliÄŸini gÃ¼ncelle
    resizeHastaBilgisiFrame();
}


/* Dashboard iÃ§in kutu klonu â€“ bÃ¼yÃ¼teÃ§ korunuyor */
function cloneKutuForRightPanel(kutu) {
    const clone = kutu.cloneNode(true);

    clone.querySelectorAll('.muayene-ozet').forEach(td => {
        td.style.display = 'block';
        td.style.webkitLineClamp = 'unset';
    });

    if (kutu.dataset.turu === 'laboratuvar') {
        const labTbody = clone.querySelector('table tbody');
        if (labTbody) {
            labTbody.style.maxHeight = 'none';
            labTbody.style.overflowY = 'visible';
            labTbody.style.display = 'table-row-group';
        }
    }

    // Hasta Bilgisi kartÄ± dashboard'a kopyalanÄ±rken,
    // ikinci bir 'hastaBilgisiFrame' id'si olmasÄ±n, onload Ã§alÄ±ÅŸmasÄ±n
    if (kutu.id === 'panel-hasta-bilgisi') {
        const iframe = clone.querySelector('iframe');
        if (iframe) {
            iframe.removeAttribute('id');
            iframe.removeAttribute('onload');
        }
    }

    return clone;


}

/* SaÄŸ panel dashboard doldur â€“ dashboard kartÄ±ndaki bÃ¼yÃ¼tec tÄ±klanÄ±nca detay aÃ§ */
function showAllCardsInRightPanelDashboard() {
    if (!sagIcerik || !solPanel) return;

    sagIcerik.innerHTML = '';
    const grid = document.createElement('div');
    grid.className = 'dashboard-grid';

    const kutular = solPanel.querySelectorAll('.kutu');
    kutular.forEach((k, index) => {
        const clone = cloneKutuForRightPanel(k);

        const icon = clone.querySelector('.ac-icon');
        if (icon) {
            icon.addEventListener('click', (e) => {
                e.stopPropagation();
                applyDashboardLayout(false);

                const originals = solPanel.querySelectorAll('.kutu');
                const original = originals[index];
                if (original) {
                    openCardInRightPanel(original);
                }
            });
        }

        grid.appendChild(clone);
    });

    sagIcerik.appendChild(grid);
    if (sagPanel) sagPanel.scrollTop = 0;
}

/* Dashboard layout uygulama */
function applyDashboardLayout(active) {
    dashboardMode = active;

    if (window.matchMedia("(max-width: 768px)").matches) {
        return;
    }

    if (active) {
        solPanel.style.display = 'none';
        sagPanel.style.width = '100%';
        solHidden = true;
        showAllCardsInRightPanelDashboard();

        fullscreenBtn.textContent = 'ğŸ“Š';
        fullscreenBtn.title = "Dashboard'u kapat";
        leftPanelBtn.textContent = 'â¡ï¸';
        leftPanelBtn.title = 'Sol Paneli GÃ¶ster';
    } else {
        solPanel.style.display = 'flex';
        if (window.matchMedia("(max-width: 1024px)").matches) {
            solPanel.style.width = '35%';
            sagPanel.style.width = '65%';
        } else {
            solPanel.style.width = '25%';
            sagPanel.style.width = '75%';
        }
        solHidden = false;

	if (sagIcerik) {
	    sagIcerik.innerHTML = lastRightPanelHTML || defaultSagIcerikHTML;
	}

        fullscreenBtn.textContent = 'ğŸ–¥ï¸';
        fullscreenBtn.title = 'Tam ekran Dashboard';
        leftPanelBtn.textContent = 'â¬…';
        leftPanelBtn.title = 'Sol Paneli Gizle';
    }

    updateFixedHeaderPosition();
    setPanelOffsets();

// Hasta bilgisi iframe yÃ¼ksekliÄŸini viewport deÄŸiÅŸince gÃ¼ncelle
    resizeHastaBilgisiFrame();
}

/* Fullscreen deÄŸiÅŸimi (F11 / ESC dahil) */
function handleFullscreenChange() {
    const isFS = !!document.fullscreenElement;

    if (!isFS) {
        fullscreenRequestedByButton = false;
        applyDashboardLayout(false);
    } else {
        if (fullscreenRequestedByButton) {
            applyDashboardLayout(true);
            fullscreenRequestedByButton = false;
        }
    }
}

/* ğŸ”´ SOL PANEL GÄ°ZLE/GÃ–STER â€“ SADELEÅTÄ°RÄ°LMÄ°Å HALÄ° */
function toggleLeftPanel() {
    if (window.matchMedia("(max-width: 768px)").matches) {
        return;
    }

    if (!solHidden) {
        // Sadece sol paneli gizle, saÄŸ paneli tam geniÅŸlik yap
        solPanel.style.display = 'none';
        sagPanel.style.width = '100%';
        leftPanelBtn.textContent = 'â¡ï¸';
        leftPanelBtn.title = 'Sol Paneli GÃ¶ster';
        solHidden = true;
    } else {
        // Sol paneli tekrar gÃ¶ster, saÄŸ paneli eski oranÄ±na Ã§ek
        solPanel.style.display = 'flex';
        if (window.matchMedia("(max-width: 1024px)").matches) {
            solPanel.style.width = '35%';
            sagPanel.style.width = '65%';
        } else {
            solPanel.style.width = '25%';
            sagPanel.style.width = '75%';
        }
        leftPanelBtn.textContent = 'â¬…';
        leftPanelBtn.title = 'Sol Paneli Gizle';
        solHidden = false;
    }

    // Ä°Ã§erik aynen kalÄ±r, sadece layout deÄŸiÅŸir
    updateFixedHeaderPosition();
    setPanelOffsets();

// Hasta bilgisi iframe yÃ¼ksekliÄŸini viewport deÄŸiÅŸince gÃ¼ncelle
    resizeHastaBilgisiFrame();
}

/* Akordeon (mobil) */
function toggleAccordion(event) {
    const kutu = event.currentTarget.closest('.kutu');
    if (!kutu) return;
    kutu.classList.toggle('active');
}

/* Click handler kurulumlarÄ± â€“ sol panel kartlarÄ± iÃ§in */
function setupClickHandlers() {
    if (!solPanel) return;
    const kutular = solPanel.querySelectorAll('.kutu');

    kutular.forEach(kutu => {
        const icon = kutu.querySelector('.ac-icon');
        const baslik = kutu.querySelector('.kutu-baslik');
        const detailHandler = () => openCardInRightPanel(kutu);

        kutu.removeEventListener('dblclick', detailHandler);
        if (icon) icon.removeEventListener('click', detailHandler);
        if (baslik) baslik.removeEventListener('click', toggleAccordion); 

        if (!window.matchMedia("(max-width: 768px)").matches) {
            kutu.addEventListener('dblclick', detailHandler);
            if (icon) icon.addEventListener('click', detailHandler);
            kutu.classList.remove('active'); 
        } else {
            if (baslik) baslik.addEventListener('click', toggleAccordion);
            if (icon) icon.addEventListener('click', detailHandler); 
        }
    });
}

function toggleHizliBar() {
    if (!hizliBar) return;

    const currentlyHidden = window.getComputedStyle(hizliBar).display === 'none';

    if (currentlyHidden) {
        // BarÄ± gÃ¶ster
        hizliBar.style.display = 'flex';
        if (hizliBarToggleBtn) {
            hizliBarToggleBtn.textContent = 'â¬‡ï¸';
            hizliBarToggleBtn.title = 'HÄ±zlÄ± Aksiyon BarÄ±nÄ± Gizle';
        }
    } else {
        // BarÄ± gizle
        hizliBar.style.display = 'none';
        if (hizliBarToggleBtn) {
            hizliBarToggleBtn.textContent = 'â¬†ï¸';
            hizliBarToggleBtn.title = 'HÄ±zlÄ± Aksiyon BarÄ±nÄ± GÃ¶ster';
        }
    }
}

function handleResizeAndLoad() {
    setupClickHandlers();

    const isMobile = window.matchMedia("(max-width: 768px)").matches;
    const isTablet = !isMobile && window.matchMedia("(max-width: 1024px)").matches;

    // Ana wrapper yÃ¶n / yÃ¼kseklik
if (mainWrapper) {
    if (isMobile) {
        mainWrapper.style.flexDirection = 'column';
        mainWrapper.style.height = 'auto';
        mainWrapper.style.marginTop = '0';
    } else {
        mainWrapper.style.flexDirection = 'row';
        mainWrapper.style.height = 'auto';
        mainWrapper.style.minHeight = '100vh';
        mainWrapper.style.marginTop = '0';
    }
}

    // ğŸ’¡ MOBILE: hep sol panel aÃ§Ä±k, saÄŸ panel gizli (sen zaten modal kullanÄ±yorsun)
    if (isMobile) {
        if (solPanel) {
            solPanel.style.display = 'flex';
            solPanel.style.width   = '100%';
        }
        if (sagPanel) {
            sagPanel.style.display = 'none';
            sagPanel.style.width   = '100%';
        }
    } else {
        // ğŸ’¡ TABLET / PC

        if (dashboardMode) {
            // Dashboard aÃ§Ä±ksa, layout'u ona gÃ¶re yeniden kur
            applyDashboardLayout(true);
        } else if (solHidden) {
            // Sol panel gizli mod
            if (solPanel) solPanel.style.display = 'none';
            if (sagPanel) {
                sagPanel.style.display = 'block';
                sagPanel.style.width   = '100%';
            }
            if (leftPanelBtn) {
                leftPanelBtn.textContent = 'â¡ï¸';
                leftPanelBtn.title       = 'Sol Paneli GÃ¶ster';
            }
        } else {
            // Normal mod: sol + saÄŸ yan yana
            if (solPanel) {
                solPanel.style.display = 'flex';
                solPanel.style.width   = isTablet ? '35%' : '25%';
            }
            if (sagPanel) {
                sagPanel.style.display = 'block';
                sagPanel.style.width   = isTablet ? '65%' : '75%';
            }
            if (leftPanelBtn) {
                leftPanelBtn.textContent = 'â¬…';
                leftPanelBtn.title       = 'Sol Paneli Gizle';
            }
        }
    }

    updateFixedHeaderPosition();
    setPanelOffsets();

// Hasta bilgisi iframe yÃ¼ksekliÄŸini viewport deÄŸiÅŸince gÃ¼ncelle
    resizeHastaBilgisiFrame();

    // ğŸ”¹ Ä°lk aÃ§Ä±lÄ±ÅŸta config'e gÃ¶re default paneli aÃ§
    if (!initialViewApplied) {
        // 1) Ayarlardan default panel id'sini al
        let defaultId = getDefaultPanelIdFromConfig();

        // 2) Config yoksa / hata varsa geriye uyum iÃ§in hasta-bilgisi'ne dÃ¶n
        if (!defaultId) {
            defaultId = 'panel-hasta-bilgisi';
        }

        const defaultCard = document.getElementById(defaultId);

        if (defaultCard) {
            if (!isMobile) {
                // MasaÃ¼stÃ¼ / tablet: saÄŸ panelde default kartÄ± aÃ§
                if (typeof openCardInRightPanel === 'function') {
                    openCardInRightPanel(defaultCard);
                }
            } else {
                // Mobile: sol panelde default kartÄ± aktif yap
                const solPanel = document.getElementById('solPanel');
                if (solPanel) {
                    solPanel.querySelectorAll('.kutu').forEach(k => k.classList.remove('active'));
                }
                defaultCard.classList.add('active');
            }
        }

        initialViewApplied = true;
    }
}

function toggleHizliBar() {
    if (!hizliBar) return;
    const currentDisplay = getComputedStyle(hizliBar).display;
    if (currentDisplay === 'none') {
        hizliBar.style.display = 'flex';
        hizliBar.style.visibility = 'visible';
    } else {
        hizliBar.style.display = 'none';
        hizliBar.style.visibility = 'hidden';
    }
    updateFixedHeaderPosition();
    setPanelOffsets();

// Hasta bilgisi iframe yÃ¼ksekliÄŸini viewport deÄŸiÅŸince gÃ¼ncelle
    resizeHastaBilgisiFrame();
}


function toggleSolPanelFullContent() {
    if (!solPanel) return;

    solAllExpanded = !solAllExpanded;

    const kutular = solPanel.querySelectorAll('.kutu');

    kutular.forEach(kutu => {
        if (solAllExpanded) {
            // PC/Tablet iÃ§in: iÃ§erik kÄ±saltmasÄ±nÄ± kaldÄ±rmak Ã¼zere
            kutu.classList.add('full');
            // Mobil akordiyon iÃ§in: iÃ§eriÄŸi gÃ¶rÃ¼nÃ¼r yapar
            kutu.classList.add('active');
        } else {
            kutu.classList.remove('full');
            kutu.classList.remove('active');
        }
    });

    if (leftAllExpandBtn) {
        if (solAllExpanded) {
            leftAllExpandBtn.textContent = 'ğŸ“„';
            leftAllExpandBtn.title = 'Sol panelde tam iÃ§erikleri kapat';
        } else {
            leftAllExpandBtn.textContent = 'ğŸ“œ';
            leftAllExpandBtn.title = 'Sol panelde tÃ¼m iÃ§erikleri gÃ¶ster';
        }
    }
}


function toggleMic() {
    micActive = !micActive;

    if (micActive) {
	micBtn.classList.add('mic-on');
        micBtn.title = 'Mikrofon aÃ§Ä±k';
        startRecognition();
    } else {
	micBtn.classList.remove('mic-on');
        micBtn.title = 'Mikrofon kapalÄ±';
        stopRecognition();
    }
}


function openMobileMenu() {
    if (!mobileMenuModal) return;
    mobileMenuModal.style.display = 'block';
}
function closeMobileMenu() {
    if (!mobileMenuModal) return;
    mobileMenuModal.style.display = 'none';

    // Mobil ayarlar alt menÃ¼sÃ¼nÃ¼ de kapat
    if (mobileSettingsSubmenu) {
        mobileSettingsSubmenu.style.display = 'none';
    }
    mobileSettingsMenuOpen = false;
    if (mobileSettingsMainBtn) {
        mobileSettingsMainBtn.textContent = 'âš™ï¸ Ayarlar â–¾';
    }

}

/* Tam ekran butonu */
if (fullscreenBtn) {
    fullscreenBtn.addEventListener('click', () => {
        const isMobile = window.matchMedia("(max-width: 768px)").matches;

        // ğŸ”¹ MOBÄ°LDE: sadece F11 gibi davransÄ±n (native fullscreen aÃ§/kapat)
        if (isMobile) {
            if (!document.fullscreenElement) {
                // Tam ekran deÄŸilse â†’ tam ekrana geÃ§
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.error("Mobile fullscreen baÅŸlatÄ±lamadÄ±:", err);
                    });
                }
            } else {
                // Zaten tam ekrandaysa â†’ tam ekrandan Ã§Ä±k
                if (document.exitFullscreen) {
                    document.exitFullscreen().catch(err => {
                        console.error("Mobile fullscreen'den Ã§Ä±kÄ±lamadÄ±:", err);
                    });
                }
            }
            return;
        }

        // ğŸ”¹ PC / TABLET: mevcut davranÄ±ÅŸ aynen kalsÄ±n
        if (!document.fullscreenElement) {
            fullscreenRequestedByButton = true;
            document.documentElement.requestFullscreen().catch(err => {
                console.error("Native fullscreen baÅŸlatÄ±lamadÄ±:", err);
                fullscreenRequestedByButton = false;
                applyDashboardLayout(true);
            });
        } else {
            applyDashboardLayout(!dashboardMode);
        }
    });
}

/* Event baÄŸlamalarÄ± */
if (leftPanelBtn) {
    leftPanelBtn.addEventListener('click', toggleLeftPanel);
}

if (hizliBarToggleBtn) {             
    hizliBarToggleBtn.addEventListener('click', toggleHizliBar);
}

if (leftAllExpandBtn) {
    leftAllExpandBtn.addEventListener('click', toggleSolPanelFullContent);
}

if (micBtn) {
    micBtn.addEventListener('click', toggleMic);
}
if (mobileMenuToggleBtn) {
    mobileMenuToggleBtn.addEventListener('click', openMobileMenu);
}
if (closeMobileMenuBtn) {
    closeMobileMenuBtn.addEventListener('click', closeMobileMenu);
}
if (closeDetailModalBtn) {
    closeDetailModalBtn.addEventListener('click', closeCardDetailModal);
}
document.getElementById('hizliBarToggleBtn')?.addEventListener('click', toggleHizliBar);

if (settingsMainBtn && settingsSubmenu) {
    settingsMainBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        settingsMenuOpen = !settingsMenuOpen;
        settingsSubmenu.style.display = settingsMenuOpen ? 'flex' : 'none';
        settingsMainBtn.textContent = settingsMenuOpen
            ? 'âš™ï¸ Ayarlar â–´'
            : 'âš™ï¸ Ayarlar â–¾';
    });
}

if (mobileSettingsMainBtn && mobileSettingsSubmenu) {
    mobileSettingsMainBtn.addEventListener('click', function (e) {
        e.stopPropagation();
        mobileSettingsMenuOpen = !mobileSettingsMenuOpen;
        mobileSettingsSubmenu.style.display = mobileSettingsMenuOpen ? 'flex' : 'none';
        mobileSettingsMainBtn.textContent = mobileSettingsMenuOpen
            ? 'âš™ï¸ Ayarlar â–´'
            : 'âš™ï¸ Ayarlar â–¾';
    });
}



document.addEventListener('fullscreenchange', handleFullscreenChange);
window.addEventListener('load', handleResizeAndLoad);

window.addEventListener('resize', () => {
    const newMode = getViewportMode();

    // EÄŸer mobile â†” tablet â†” desktop modu DEÄÄ°ÅTÄ°YSE â†’ sayfayÄ± yenile
    if (newMode !== currentViewportMode) {
        currentViewportMode = newMode;
        window.location.reload();
    } else {
        // Sadece aynÄ± mod iÃ§inde boyut ufak ufak oynuyorsa, normal dÃ¼zenlemeyi yap
        handleResizeAndLoad();
    }
});


document.addEventListener('DOMContentLoaded', () => {
    // Sol panel sÄ±rasÄ±nÄ± ve gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼ uygula
    applySolPanelConfig();

    // AÃ§Ä±lÄ±ÅŸta layout + default panel iÃ§in
    handleResizeAndLoad();

    // Ayar ekranÄ±ndan dÃ¶nÃ¼lÃ¼p config deÄŸiÅŸirse: sadece sol panel sÄ±rasÄ±nÄ±/gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼ gÃ¼ncelle
    window.addEventListener('storage', (e) => {
        if (e.key === 'solPanelConfig') {
            applySolPanelConfig();
            handleResizeAndLoad(); // istersen bunu da koy; sadece gÃ¶rÃ¼nÃ¼m tazelensin
        }
    });
});

</script>

	
</body>
</html>
